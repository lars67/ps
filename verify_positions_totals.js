// Verification script to check portfolios.positions total calculations

const positionData = [
  {
    "symbol": "EMBLA:XCSE",
    "volume": 0,
    "price": 34,
    "currency": "DKK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Health technology",
    "industry": "Medical specialties",
    "investedFull": 714.0003204345703,
    "investedFullSymbol": 714.0003204345703,
    "realized": -714.0003204345703,
    "marketRate": 1,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 31.6,
    "marketClose": 31.6,
    "country": "US",
    "marketPrice": 31.6,
    "fee": 1.504,
    "feeSymbol": 1.504,
    "resultSymbol": -715.5043204345703,
    "result": -715.5043204345703,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "SECU_B:XSTO",
    "volume": 0,
    "price": 139.1694,
    "currency": "SEK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Commercial services",
    "industry": "Miscellaneous commercial services",
    "investedFull": -108.43914305786166,
    "investedFullSymbol": -108.23055761718751,
    "realized": 108.43914305786043,
    "marketRate": 0.6798558705554422,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 146,
    "marketClose": 146,
    "name": "Securitas AB (publ)",
    "country": "US",
    "marketPrice": 146,
    "fee": 1.9780537612189404,
    "feeSymbol": 3.050863,
    "resultSymbol": 105.17969461718751,
    "result": 71.50703284872357,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "ESSITY_B:XSTO",
    "volume": 0,
    "price": 272.9034,
    "currency": "SEK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Consumer non-durables",
    "industry": "Household/Personal care",
    "investedFull": 562.5870605333121,
    "investedFullSymbol": 914.8895482910175,
    "realized": -562.5870605333117,
    "marketRate": 0.6798558705554422,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 257.7,
    "marketClose": 257.7,
    "name": "Essity AB (publ)",
    "country": "US",
    "marketPrice": 257.7,
    "fee": 1.5776512914612522,
    "feeSymbol": 2.433484,
    "resultSymbol": -917.3230322910175,
    "result": -623.6474486987677,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "MVV1:XETR",
    "volume": 0,
    "price": 29.7966,
    "currency": "EUR",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Utilities",
    "industry": "Electric utilities",
    "investedFull": -61.23368630218829,
    "investedFullSymbol": -7.69011083984401,
    "realized": 61.23368630218579,
    "marketRate": 7.472166180975865,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 30.3,
    "marketClose": 30.3,
    "name": "MVV Energie AG",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 30.3,
    "fee": 1.784094220468521,
    "feeSymbol": 0.239186,
    "resultSymbol": 7.45092483984401,
    "result": 55.674548605275426,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "GIL:XETR",
    "volume": 0,
    "price": 44.49,
    "currency": "EUR",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Producer manufacturing",
    "industry": "Industrial machinery",
    "investedFull": -72.31491828117396,
    "investedFullSymbol": -9.094159545898492,
    "realized": 72.31491828117368,
    "marketRate": 7.472166180975865,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 46.3,
    "marketClose": 46.3,
    "name": "DMG MORI AKTIENGESELLSCHAFT",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 46.3,
    "fee": 2.0730027638883595,
    "feeSymbol": 0.277919,
    "resultSymbol": 8.816240545898491,
    "result": 65.8764144504109,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "EBK:XETR",
    "volume": 0,
    "price": 61.6547,
    "currency": "EUR",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Utilities",
    "industry": "Electric utilities",
    "investedFull": -273.18825633249253,
    "investedFullSymbol": -36.013277307128874,
    "realized": 273.1882563324936,
    "marketRate": 7.472166180975865,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 67.8,
    "marketClose": 67.8,
    "name": "EnBW Energie Baden-Württemberg AG",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 67.8,
    "fee": 2.1020023492336275,
    "feeSymbol": 0.281806,
    "resultSymbol": 35.73147130712887,
    "result": 266.9914914976378,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "OLT:XOSL",
    "volume": 0,
    "price": 221.5177,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Real estate development",
    "investedFull": -529.2076669923408,
    "investedFullSymbol": -862.75838591309,
    "realized": 529.2076669923379,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 276,
    "marketClose": 276,
    "name": "Olav Thon Eiendomsselskap ASA",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 276,
    "fee": 3.063978562532335,
    "feeSymbol": 4.828846,
    "resultSymbol": 857.92953991309,
    "result": 544.751755611842,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "MELG:XOSL",
    "volume": 0,
    "price": 158.175,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Regional banks",
    "investedFull": -914.7975596953456,
    "investedFullSymbol": -1470.7495147705085,
    "realized": 914.7975596953459,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 175,
    "marketClose": 175,
    "name": "Melhus Sparebank",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 175,
    "fee": 3.0995775755993904,
    "feeSymbol": 4.884983,
    "resultSymbol": 1465.8645317705086,
    "result": 930.7667355200384,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "AASB:XOSL",
    "volume": 0,
    "price": 115.7502,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Savings banks",
    "investedFull": -331.7138477410681,
    "investedFullSymbol": -536.9139290771491,
    "realized": 331.7138477410679,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 126.98,
    "marketClose": 126.98,
    "name": "Aasen Sparebank",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 126.98,
    "fee": 1.5072095767924716,
    "feeSymbol": 2.375377,
    "resultSymbol": 534.5385520771491,
    "result": 339.41110678592236,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "PPG:XOSL",
    "volume": 0,
    "price": 71.5342,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Real estate development",
    "investedFull": -142.11747102722074,
    "investedFullSymbol": -238.4001114257826,
    "realized": 142.11747102722106,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 100,
    "marketClose": 100,
    "name": "Pioneer Property Group ASA",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 100,
    "fee": 1.5384834693075424,
    "feeSymbol": 2.424646,
    "resultSymbol": 235.9754654257826,
    "result": 149.8352056802226,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "EAT:XNYS",
    "volume": 0,
    "price": 181.97,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Consumer services",
    "industry": "Restaurants",
    "investedFull": 2652.165517091751,
    "investedFullSymbol": 310.60000000000014,
    "realized": 10406.602346897125,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 159.88,
    "marketClose": 159.88,
    "name": "Brinker International, Inc.",
    "country": "US",
    "marketPrice": 159.88,
    "fee": 2.3465370210886,
    "feeSymbol": 0.33287999999999995,
    "resultSymbol": -310.9328800000001,
    "result": -1980.5491025188542,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "OPCH:XNAS",
    "volume": 57,
    "price": 34.95,
    "currency": "USD",
    "invested": 13737.66673207283,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Health services",
    "industry": "Medical/Nursing services",
    "investedFull": 13737.66673207283,
    "investedFullSymbol": 1992.15,
    "realized": 0,
    "marketRate": 6.369699796685553,
    "marketValue": 10449.237728470782,
    "marketValueSymbol": 1640.46,
    "avgPremium": 241.03579822361468,
    "avgPremiumSymbol": 34.953495000000004,
    "bprice": 28.78,
    "marketClose": 28.78,
    "name": "Option Care Health, Inc.",
    "country": "US",
    "marketPrice": 28.78,
    "fee": 1.373766673207283,
    "feeSymbol": 0.199215,
    "resultSymbol": -351.88921500000004,
    "result": -2241.428661241339,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 8.32
  },
  {
    "symbol": "TWLO:XNYS",
    "volume": 0,
    "price": 146.58,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Packaged software",
    "investedFull": 4874.167790031435,
    "investedFullSymbol": 629.3300000000002,
    "realized": 8800.616248846054,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 106.03,
    "marketClose": 106.03,
    "name": "Twilio Inc.",
    "country": "US",
    "marketPrice": 106.03,
    "fee": 2.247540028772354,
    "feeSymbol": 0.318175,
    "resultSymbol": -629.6481750000002,
    "result": -4010.66985228093,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "MSTR:XNAS",
    "volume": 0,
    "price": 334.79,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Internet software/Services",
    "investedFull": 1461.401511311531,
    "investedFullSymbol": 143.85000000000014,
    "realized": 10551.41624212265,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 327.59,
    "marketClose": 327.59,
    "name": "Strategy Inc",
    "country": "US",
    "marketPrice": 327.59,
    "fee": 2.256423399555683,
    "feeSymbol": 0.320405,
    "resultSymbol": -144.17040500000013,
    "result": -918.3221994165747,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "NET:XNYS",
    "volume": 0,
    "price": 138.4,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Information technology services",
    "investedFull": 2543.11611700058,
    "investedFullSymbol": 295.6200000000001,
    "realized": 10368.53698015213,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 209.98,
    "marketClose": 209.98,
    "name": "Cloudflare, Inc.",
    "country": "US",
    "marketPrice": 209.98,
    "fee": 2.328019007730484,
    "feeSymbol": 0.33027799999999996,
    "resultSymbol": -295.95027800000014,
    "result": -1885.1144256056336,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "RBLX:XNYS",
    "volume": 0,
    "price": 71.07,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Packaged software",
    "investedFull": 2772.666422295568,
    "investedFullSymbol": 312.47999999999956,
    "realized": 13038.008741140366,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 129.79,
    "marketClose": 129.79,
    "name": "Roblox Corporation",
    "country": "US",
    "marketPrice": 129.79,
    "fee": 2.88486839045763,
    "feeSymbol": 0.409386,
    "resultSymbol": -312.88938599999955,
    "result": -1993.0114583892646,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "PLTR:XNAS",
    "volume": 0,
    "price": 82.49,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Packaged software",
    "investedFull": 184.70555584430622,
    "investedFullSymbol": -50.37000000000012,
    "realized": 13430.730233192444,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 156.14,
    "marketClose": 156.14,
    "name": "Palantir Technologies Inc.",
    "country": "US",
    "marketPrice": 156.14,
    "fee": 2.704616602222919,
    "feeSymbol": 0.384491,
    "resultSymbol": 49.98550900000012,
    "result": 318.39268651452466,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "TSLA:XNAS",
    "volume": 0,
    "price": 404.6,
    "currency": "USD",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Consumer durables",
    "industry": "Motor vehicles",
    "investedFull": 3156.809703826907,
    "investedFullSymbol": 408.4200000000003,
    "realized": 5553.819758892058,
    "marketRate": 6.369699796685553,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 338.53,
    "marketClose": 338.53,
    "name": "Tesla, Inc.",
    "country": "US",
    "marketPrice": 338.53,
    "fee": 1.4264449221611022,
    "feeSymbol": 0.201918,
    "resultSymbol": -408.6219180000003,
    "result": -2602.7989480058623,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "SEAF:XSTO",
    "volume": 0,
    "price": 5.28,
    "currency": "SEK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Producer manufacturing",
    "industry": "Trucks/Construction/Farm machinery",
    "investedFull": -108.06993843408327,
    "investedFullSymbol": 266.58000000000084,
    "realized": 5187.801269695289,
    "marketRate": 0.6798558705554422,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 6.5,
    "marketClose": 6.5,
    "name": "Seafire AB (publ)",
    "country": "Sweden",
    "a2": "SE",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 6.5,
    "fee": 1.0267532600956497,
    "feeSymbol": 1.5372780000000001,
    "resultSymbol": -268.11727800000085,
    "result": -182.2811054456461,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "VVL:XOSL",
    "volume": 0,
    "price": 315.0412,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Regional banks",
    "investedFull": -642.9593507575328,
    "investedFullSymbol": -716.0025000000014,
    "realized": 5637.506527958359,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 380,
    "marketClose": 380,
    "name": "Voss Veksel- og Landmandsbank ASA",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 380,
    "fee": 1.063205206482946,
    "feeSymbol": 1.6468060000000002,
    "resultSymbol": 714.3556940000014,
    "result": 453.5879700298441,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "SPOG:XOSL",
    "volume": 0,
    "price": 71.5342,
    "currency": "NOK",
    "invested": 0,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Finance",
    "industry": "Regional banks",
    "investedFull": -184.66283671362544,
    "investedFullSymbol": -12.969600000001265,
    "realized": 5265.327195347578,
    "marketRate": 0.634960949901581,
    "marketValue": 0,
    "marketValueSymbol": 0,
    "avgPremium": 0,
    "avgPremiumSymbol": 0,
    "bprice": 72,
    "marketClose": 72,
    "name": "Sparebanken Øst",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 72,
    "fee": 1.0345991300323423,
    "feeSymbol": 1.603663,
    "resultSymbol": 11.365937000001264,
    "result": 7.216926154042328,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 0
  },
  {
    "symbol": "MVE:XOSL",
    "volume": 157,
    "price": 79.5,
    "currency": "NOK",
    "invested": 8189.510191996161,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Retail trade",
    "industry": "Food retail",
    "investedFull": 8189.510191996161,
    "investedFullSymbol": 12481.5,
    "realized": 0,
    "marketRate": 0.634960949901581,
    "marketValue": 16947.1077528732,
    "marketValueSymbol": 26690,
    "avgPremium": 52.16770154786854,
    "avgPremiumSymbol": 79.50795,
    "bprice": 170,
    "marketClose": 170,
    "name": "Matvareexpressen As",
    "country": "US",
    "marketPrice": 170,
    "fee": 0.8189510191996161,
    "feeSymbol": 1.24815,
    "resultSymbol": 14207.25185,
    "result": 9021.050130166996,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 13.49
  },
  {
    "symbol": "GYL:XOSL",
    "volume": 27,
    "price": 444.3019,
    "currency": "NOK",
    "invested": 7871.05743188543,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Retail trade",
    "industry": "Specialty stores",
    "investedFull": 7871.05743188543,
    "investedFullSymbol": 11996.1513,
    "realizedFull": 0,
    "marketValue": 7543.336084830782,
    "marketValueSymbol": 11880,
    "avgPremium": 291.54979768678965,
    "avgPremiumSymbol": 444.34633018518514,
    "bprice": 440,
    "marketClose": 440,
    "name": "Gyldendal ASA",
    "country": "Norway",
    "a2": "NO",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 440,
    "fee": 0.7871056578913973,
    "feeSymbol": 1.199615,
    "resultSymbol": -117.35091499999953,
    "result": -74.5132484602194,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 6
  },
  {
    "symbol": "1COV:XETR",
    "volume": 16,
    "price": 58.84,
    "currency": "EUR",
    "invested": 7023.001028137208,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Process industries",
    "industry": "Chemicals: specialty",
    "investedFull": 7023.001028137208,
    "investedFullSymbol": 941.44,
    "realized": 0,
    "marketRate": 7.472166180975865,
    "marketValue": 6611.3726369274455,
    "marketValueSymbol": 884.8,
    "avgPremium": 438.98145801500135,
    "avgPremiumSymbol": 58.845884000000005,
    "bprice": 55.3,
    "marketClose": 55.3,
    "name": "Covestro AG",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 55.3,
    "fee": 0.7023001028137208,
    "feeSymbol": 0.094144,
    "resultSymbol": -56.7341440000001,
    "result": -423.92695210341554,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 5.26
  },
  {
    "symbol": "TKA:XETR",
    "volume": 191,
    "price": 9.728,
    "currency": "EUR",
    "invested": 13860.759065185546,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Non-energy minerals",
    "industry": "Steel",
    "investedFull": 13860.759065185546,
    "investedFullSymbol": 1858.048,
    "realized": 0,
    "marketRate": 7.472166180975865,
    "marketValue": 13977.837555107228,
    "marketValueSymbol": 1870.654,
    "avgPremium": 72.57667613918343,
    "avgPremiumSymbol": 9.72897280104712,
    "bprice": 9.794,
    "marketClose": 9.794,
    "name": "thyssenkrupp AG",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 9.794,
    "fee": 1.3860773984885215,
    "feeSymbol": 0.185805,
    "resultSymbol": 12.420194999999994,
    "result": 92.80576104012549,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 11.12
  },
  {
    "symbol": "RHM:XETR",
    "volume": 1,
    "price": 1290.4686,
    "currency": "EUR",
    "invested": 9626.701972062778,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Electronic technology",
    "industry": "Aerospace & defense",
    "investedFull": 9626.701972062778,
    "investedFullSymbol": 1290.4686,
    "realized": 0,
    "marketRate": 7.472166180975865,
    "marketValue": 13035.193902712397,
    "marketValueSymbol": 1744.5,
    "avgPremium": 9627.664643304362,
    "avgPremiumSymbol": 1290.5976469999998,
    "bprice": 1744.5,
    "marketClose": 1744.5,
    "name": "Rheinmetall AG",
    "country": "Germany",
    "a2": "DE",
    "region": "Europe",
    "subRegion": "Western Europe",
    "marketPrice": 1744.5,
    "fee": 0.9626712415852546,
    "feeSymbol": 0.129047,
    "resultSymbol": 453.90235300000006,
    "result": 3391.6338115519693,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 10.37
  },
  {
    "symbol": "SAAB_B:XSTO",
    "volume": 54,
    "price": 386.2561,
    "currency": "SEK",
    "invested": 14326.074571289633,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Electronic technology",
    "industry": "Aerospace & defense",
    "investedFull": 14326.074571289633,
    "investedFullSymbol": 20857.8294,
    "realized": 0,
    "marketRate": 0.6798558705554422,
    "marketValue": 18888.43565164185,
    "marketValueSymbol": 27783,
    "avgPremium": 265.3242070145921,
    "avgPremiumSymbol": 386.29472561111106,
    "bprice": 514.5,
    "marketClose": 514.5,
    "name": "Saab AB (publ)",
    "country": "US",
    "marketPrice": 514.5,
    "fee": 1.4326074983396024,
    "feeSymbol": 2.085783,
    "resultSymbol": 6923.084817000001,
    "result": 4706.6998551907,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 15.03
  },
  {
    "symbol": "OVZON:XSTO",
    "volume": 685,
    "price": 29.6,
    "currency": "SEK",
    "invested": 13926.448550176972,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Communications",
    "industry": "Major telecommunications",
    "investedFull": 13926.448550176972,
    "investedFullSymbol": 20276,
    "realized": 0,
    "marketRate": 0.6798558705554422,
    "marketValue": 16485.82500509892,
    "marketValueSymbol": 24249,
    "avgPremium": 20.33261488325838,
    "avgPremiumSymbol": 29.602960000000003,
    "bprice": 35.4,
    "marketClose": 35.4,
    "name": "Ovzon AB (publ)",
    "country": "Sweden",
    "a2": "SE",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 35.4,
    "fee": 1.3926448550176973,
    "feeSymbol": 2.0276,
    "resultSymbol": 3970.9724,
    "result": 2699.6888979536334,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 13.12
    },
  {
    "symbol": "SYNACT:XSTO",
    "volume": 752,
    "price": 18,
    "currency": "SEK",
    "invested": 9297.12012108875,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Health technology",
    "industry": "Pharmaceuticals: major",
    "investedFull": 9297.12012108875,
    "investedFullSymbol": 13536,
    "realized": 0,
    "marketRate": 0.6798558705554422,
    "marketValue": 9724.005710789312,
    "marketValueSymbol": 14303.039999999999,
    "avgPremium": 12.364427969549014,
    "avgPremiumSymbol": 18.0018,
    "bprice": 19.02,
    "marketClose": 19.02,
    "name": "SynAct Pharma AB",
    "country": "Sweden",
    "a2": "SE",
    "region": "Europe",
    "subRegion": "Northern Europe",
    "marketPrice": 19.02,
    "fee": 0.9297120121088749,
    "feeSymbol": 1.3536,
    "resultSymbol": 765.686399999999,
    "result": 520.5563940444619,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 7.74
  },
  {
    "symbol": "OKTA:XNAS",
    "volume": 21,
    "price": 104.69,
    "currency": "USD",
    "invested": 15160.5666911602,
    "tradeTime": "2025-09-08T00:00:00",
    "sector": "Technology services",
    "industry": "Packaged software",
    "investedFull": 15160.5666911602,
    "investedFullSymbol": 2198.49,
    "realized": 0,
    "marketRate": 6.369699796685553,
    "marketValue": 12003.95405484579,
    "marketValueSymbol": 1884.54,
    "avgPremium": 722.0039403728246,
    "avgPremiumSymbol": 104.700469,
    "bprice": 89.74,
    "marketClose": 89.74,
    "name": "Okta, Inc.",
    "country": "US",
    "marketPrice": 89.74,
    "fee": 1.5160566691160202,
    "feeSymbol": 0.219849,
    "resultSymbol": -314.16984899999983,
    "result": -2001.1676233000298,
    "todayResult": 0,
    "todayResultPercent": 0,
    "weight": 9.55
  }
// Add the totals and totals entries omitted from the original data
] + [
  {
    "symbol": "TOTAL",
    "name": "TOTAL",
    "investedFull": 128571.82167809052,
    "investedFullSymbol": 128571.82167809052,
    "marketValue": 125666.3060832977,
    "realized": 89396.79071270587,
    "result": 3983.5113777452616,
    "todayResult": 0,
    "weight": 0
  },
  {
    "symbol": "CASH_DKK",
    "total": 99235.15072589854,
    "totalLocal": 99235.15072589854,
    "rate": 1
  },
  {
    "symbol": "CASH_SEK",
    "total": -37897.252288173106,
    "totalLocal": -55743.06839067383,
    "rate": 0.6798558705554422
  },
  {
    "symbol": "CASH_EUR",
    "total": -30166.323337869908,
    "totalLocal": -4037.1590523071295,
    "rate": 7.472166180975865
  },
  {
    "symbol": "CASH_NOK",
    "total": -13105.503370889239,
    "totalLocal": -20639.857258813463,
    "rate": 0.634960949901581
  },
  {
    "symbol": "CASH_USD",
    "total": -39750.55746020196,
    "totalLocal": -6240.57,
    "rate": 6.369699796685553
  },
  {
    "symbol": "TOTAL_DKK",
    "name": "TOTAL_DKK",
    "investedFull": 714.0003204345703,
    "investedFullSymbol": 714.0003204345703,
    "fee": 1.504,
    "feeSymbol": 1.504,
    "total": 712.4963204345703,
    "totalSymbol": 712.4963204345703,
    "totalType": "currencyTotal"
  },
  {
    "symbol": "TOTAL_SEK",
    "name": "TOTAL_SEK",
    "investedFull": 37895.72122159673,
    "investedFullSymbol": 55743.06839067383,
    "fee": 8.337422678242017,
    "feeSymbol": 12.488608,
    "total": 37887.38379891849,
    "totalSymbol": 55730.57978267383,
    "totalType": "currencyTotal"
  },
  {
    "symbol": "TOTAL_EUR",
    "name": "TOTAL_EUR",
    "investedFull": 30103.725204469683,
    "investedFullSymbol": 4037.1590523071295,
    "fee": 9.010148076478005,
    "feeSymbol": 1.207907,
    "total": 30094.715056393205,
    "totalSymbol": 4035.9511453071295,
    "totalType": "currencyTotal"
  },
  {
    "symbol": "TOTAL_NOK",
    "name": "TOTAL_NOK",
    "investedFull": 13315.108890954456,
    "investedFullSymbol": 20639.857258813463,
    "fee": 12.91311019783804,
    "feeSymbol": 20.212086000000003,
    "total": 13302.195780756618,
    "totalSymbol": 20619.645172813463,
    "totalType": "currencyTotal"
  },
  {
    "symbol": "TOTAL_USD",
    "name": "TOTAL_USD",
    "investedFull": 46543.266040635106,
    "investedFullSymbol": 6240.57,
    "fee": 19.084272714312075,
    "feeSymbol": 2.716597,
    "total": 46524.181767920796,
    "totalSymbol": 6237.853403,
    "totalType": "currencyTotal"
  }
];

// Calculation and verification functions
function calculateTotals() {
  console.log("=== PORTFOLIO POSITIONS TOTALS VERIFICATION ===\n");

  // Filter out TOTAL and CASH entries
  const positions = positionData.filter(p =>
    !p.symbol?.startsWith('TOTAL_') &&
    !p.symbol?.startsWith('CASH_') &&
    !p.symbol?.includes('DIVIDENDS') &&
    !p.totalType
  );

  const totals = positionData.filter(p => p.symbol === 'TOTAL')[0];
  const cashEntries = positionData.filter(p => p.symbol?.startsWith('CASH_'));

  console.log("Calculating from", positions.length, "positions...\n");

  // Calculate individual position totals
  const calcInvestedFull = positions.reduce((sum, p) => sum + (p.investedFull || 0), 0);
  const calcResult = positions.reduce((sum, p) => sum + (p.result || 0), 0);
  const calcMarketValue = positions.reduce((sum, p) => sum + (p.marketValue || 0), 0);
  const calcRealized = positions.reduce((sum, p) => sum + (p.realized || 0), 0);
  const calcFees = positions.reduce((sum, p) => sum + (p.fee || 0), 0);

  console.log("CALCULATED TOTALS:");
  console.log("  investedFull:", calcInvestedFull.toFixed(4));
  console.log("  result:", calcResult.toFixed(4));
  console.log("  marketValue:", calcMarketValue.toFixed(4));
  console.log("  realized:", calcRealized.toFixed(4));
  console.log("  fees:", calcFees.toFixed(4));

  console.log("\nREPORTED TOTALS (from TOTAL entry):");
  console.log("  investedFull:", totals?.investedFull?.toFixed(4));
  console.log("  result:", totals?.result?.toFixed(4));
  console.log("  marketValue:", totals?.marketValue?.toFixed(4));
  console.log("  realized:", totals?.realized?.toFixed(4));
  console.log("  fees: N/A (not in TOTAL entry)");

  console.log("\nDIFFERENCES:");
  console.log("  investedFull diff:", ((totals?.investedFull || 0) - calcInvestedFull).toFixed(4));
  console.log("  result diff:", ((totals?.result || 0) - calcResult).toFixed(4));
  console.log("  marketValue diff:", ((totals?.marketValue || 0) - calcMarketValue).toFixed(4));
  console.log("  realized diff:", ((totals?.realized || 0) - calcRealized).toFixed(4));

  console.log("\n=== CURRENCY BREAKDOWN ===");
  verifyCurrencyTotals(positions);

  console.log("\n=== CASH TOTALS VERIFICATION ===");
  verifyCashTotals(cashEntries);

  console.log("\n=== WEIGHT TOTALS VERIFICATION ===");
  verifyWeightTotals(positions, calcMarketValue);
}

function verifyCurrencyTotals(positions) {
  const currencies = [...new Set(positions.map(p => p.currency))];

  currencies.forEach(currency => {
    const currencyPositions = positions.filter(p => p.currency === currency);
    const calcInvested = currencyPositions.reduce((sum, p) => sum + (p.investedFull || 0), 0);
    const calcFee = currencyPositions.reduce((sum, p) => sum + (p.fee || 0), 0);

    const totalEntry = positionData.find(p => p.symbol === `TOTAL_${currency}`);

    if (totalEntry) {
      console.log(`${currency}:`);
      console.log(`  Calculated investedFull: ${calcInvested.toFixed(4)}`);
      console.log(`  Reported investedFull: ${totalEntry.investedFull?.toFixed(4)}`);
      console.log(`  Diff: ${(totalEntry.investedFull - calcInvested).toFixed(4)}`);
      console.log(`  Calculated fee: ${calcFee.toFixed(4)}`);
      console.log(`  Reported fee: ${totalEntry.fee?.toFixed(4)}`);
      console.log(`  Fee diff: ${(totalEntry.fee - calcFee).toFixed(4)}`);
    }
  });
}

function verifyCashTotals(cashEntries) {
  const totalCash = cashEntries.reduce((sum, cash) => sum + (cash.total || 0), 0);
  console.log("Total cash in portfolio currency:", totalCash.toFixed(4));
}

function verifyWeightTotals(positions, totalMarketValue) {
  const positionsWithWeight = positions.filter(p => p.weight > 0);
  const totalWeight = positionsWithWeight.reduce((sum, p) => sum + (p.weight || 0), 0);
  console.log("Sum of all weights:", totalWeight.toFixed(2), "(should be 100 for equal distribution)");
}

// Run the verification
calculateTotals();
