<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PS2 API Manual</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h3 {
            margin-top: 20px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #343a40;
            color: white;
            font-weight: bold;
        }
        tbody tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        pre {
            background-color: #282c34;
            color: #abb2bf;
            border: 1px solid #5c6370;
            border-radius: 5px;
            padding: 12px;
            overflow-x: auto;
            font-family: "Droid Sans Mono", monospace;
            font-size: 0.9em;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
            color: #0056b3;
        }
        ul, ol {
            margin-bottom: 15px;
        }
        li {
            margin-bottom: 8px;
        }
        dl {
            margin-bottom: 20px;
        }
        dt {
            font-weight: bold;
            margin-bottom: 5px;
        }
        dd {
            margin-left: 20px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1 style="color:#2c3e50">PS2 API Manual</h1>

    <div class="toc">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#authentication">Authentication</a></li>
            <li><a href="#collections">Collections</a></li>
            <li><a href="#console">Console</a></li>
            <li><a href="#operations">Operations</a></li>
            <li><a href="#portfolios">Portfolios</a></li>
            <li><a href="#prices">Prices</a></li>
            <li><a href="#tests">Tests</a></li>
            <li><a href="#tools">Tools</a></li>
            <li><a href="#trades">Trades</a></li>
        </ul>
    </div>

    <h2 id="introduction">Introduction</h2>
    <p>This document provides a comprehensive guide to the PS2 API, its components, and operations.</p>

    <h2 id="authentication">Authentication</h2>

    <h3>Login</h3>
    <p>Authenticates a user and returns a token for subsequent API calls. This token is required for accessing protected resources and performing operations within the system.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{"cmd":"login","login":"username","password":"userpassword"}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>login</code></td>
                <td>The username of the user attempting to log in. This is a string value.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>password</code></td>
                <td>The password of the user attempting to log in. This is a string value and should be treated confidentially.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Successful Response:</strong></p>
    <p>A successful login returns a JSON object containing the user's token, role, and user ID. The token is a JWT (JSON Web Token) that should be included in the <code>Authorization</code> header of subsequent API requests.</p>
    <pre><code>{
  "token": "eyJhbGciOiJIU...",
  "role": "member",
  "userId": "66450cb15e1f94688db59355"
}</code></pre>
    <p><strong>Error Response:</strong></p>
    <p>An unsuccessful login attempt returns a JSON object with an <code>error</code> key and a message indicating the reason for the failure. In this case, "Invalid credentials" indicates that either the username or password was incorrect.</p>
    <pre><code>{"error": "Invalid credentials"}</code></pre>

    <h4>Error Handling and Troubleshooting</h4>
    <p>When interacting with the Authentication API, you may encounter various errors. Here are some common errors and how to troubleshoot them:</p>
    <ul>
        <li><strong>Invalid credentials:</strong> This error indicates that the username or password provided is incorrect. Double-check your credentials and try again. If you have forgotten your password, use the password reset functionality.</li>
        <li><strong>Username already exists:</strong> This error indicates that the username you are trying to register is already taken. Choose a different username and try again.</li>
        <li><strong>Missing parameters:</strong> This error indicates that you are missing one or more required parameters in your request. Ensure that you have included all required parameters and that they are correctly formatted.</li>
        <li><strong>Invalid parameter values:</strong> This error indicates that one or more of the parameters you have provided has an invalid value. Ensure that your parameter values are valid and conform to the expected format.</li>
        <li><strong>Internal server error:</strong> This error indicates that there is a problem with the PS2 server. If you encounter this error, try again later. If the error persists, contact the PS2 support team.</li>
    </ul>

    <h2 id="collections">Collections</h2>
    <p>Collections represent groups of related data within the PS2 system. These collections can represent various entities such as portfolios, trades, user data, and more. Common operations on collections include listing, adding, updating, and removing items.</p>

    <h3>General Syntax</h3>
    <p>All collection operations follow a consistent syntax: <code>collection_name.method</code>. This syntax specifies the target collection and the action to be performed.</p>
    <p><strong>Example:</strong></p>
    <p>The following command retrieves a list of portfolios, using an empty filter to return all portfolios:</p>
    <pre><code>{"command": "portfolios.list", "filter": {}}</code></pre>

    <h3>List</h3>
    <p>Retrieves a list of items from the specified collection. This method allows you to retrieve multiple items from a collection, optionally filtering the results based on specific criteria.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{"command": "collection_name.list", "filter": {}}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>filter</code></td>
                <td>An object containing fields and values to filter the results. The filter object uses a MongoDB-like syntax to specify the filtering criteria. If no filter is provided, all items in the collection will be returned.</td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns an array of JSON objects, where each object represents an item in the collection that matches the specified filter criteria. If no items match the filter, an empty array is returned.</p>

    <h3>Add</h3>
    <p>Adds a new item to the specified collection. This method allows you to create new items within a collection, such as creating a new portfolio or adding a new trade.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{"command": "collection_name.add", "field1": "value1", "field2": "value2"}</code></pre>
    <p><strong>Parameters:</strong></p>
    <p>The parameters for this method depend on the specific collection to which you are adding an item. Each collection has its own set of required and optional fields. Refer to the documentation for the specific collection to determine the required parameters.</p>
    <p><strong>Output:</strong></p>
    <p>Returns a JSON object representing the newly created item, including its unique identifier (<code>_id</code>) assigned by the database.</p>

    <h3>Update</h3>
    <p>Updates an existing item in the collection. This method allows you to modify the fields of an existing item within a collection, such as updating the description of a portfolio or modifying the quantity of a trade.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{"command": "collection_name.update", "_id": "record_id", "field1": "new_value"}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>_id</code></td>
                <td>The unique identifier (MongoDB key) of the item to update. This is a string value.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>field1, field2...</code></td>
                <td>One or more fields to update with their new values. The specific fields that can be updated depend on the collection.</td>
                <td>At least one</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a JSON object representing the updated item, with the modified fields reflecting the new values.</p>

    <h3>Remove</h3>
    <p>Removes an item from the collection. This method allows you to delete an item from a collection, such as removing a portfolio or deleting a trade. This operation is irreversible, so use it with caution.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{"command": "collection_name.remove", "_id": "record_id"}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>_id</code></td>
                <td>The unique identifier (MongoDB key) of the item to remove. This is a string value.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a success message or the removed object. The exact output may vary depending on the implementation.</p>

    <h2 id="console">Console</h2>
    <p>The PS2Dox console provides a command-line interface for interacting with the system. It serves as a central point for executing commands, monitoring system status, and troubleshooting issues.</p>

    <h3>Features:</h3>
    <ul>
        <li><strong>Command execution:</strong> Allows users to execute various commands to interact with the PS2 system.</li>
        <li><strong>Output display:</strong> Displays the output of executed commands, providing real-time feedback on the status of operations.</li>
        <li><strong>Error reporting:</strong> Provides detailed error messages to help users identify and resolve issues.</li>
        <li><strong>System status monitoring:</strong> Allows users to monitor the status of various system components and operations.</li>
    </ul>

    <h2 id="operations">Operations</h2>
    <p>Operations in PS2Dox encompass various actions and processes within the system. These operations are categorized to provide a clear understanding of the system's functionalities.</p>

    <h3>Categories of operations:</h3>
    <ol>
        <li><strong>User Management:</strong>
            <ul>
                <li><strong>User registration:</strong> Creates a new user account in the system.</li>
                <li><strong>Authentication:</strong> Verifies the identity of a user and grants access to protected resources.</li>
                <li><strong>Profile management:</strong> Allows users to manage their personal information and settings.</li>
            </ul>
        </li>
        <li><strong>Portfolio Management:</strong>
            <ul>
                <li><strong>Portfolio creation:</strong> Creates a new portfolio to track financial instruments or assets.</li>
                <li><strong>Portfolio updates:</strong> Modifies an existing portfolio, such as adding or removing assets.</li>
                <li><strong>Portfolio deletion:</strong> Deletes a portfolio from the system.</li>
            </ul>
        </li>
        <li><strong>Trading:</strong>
            <ul>
                <li><strong>Order placement:</strong> Places a new order to buy or sell a financial instrument.</li>
                <li><strong>Order modification:</strong> Modifies an existing order, such as changing the quantity or price.</li>
                <li><strong>Order cancellation:</strong> Cancels an existing order.</li>
            </ul>
        </li>
        <li><strong>Data Retrieval:</strong>
            <ul>
                <li><strong>Market data fetching:</strong> Retrieves real-time or historical market data for financial instruments.</li>
                <li><strong>Performance metrics calculation:</strong> Calculates performance metrics for portfolios and trades.</li>
                <li><strong>Report generation:</strong> Generates reports based on portfolio data and performance metrics.</li>
            </ul>
        </li>
        <li><strong>System Administration:</strong>
            <ul>
                <li><strong>User account management:</strong> Manages user accounts, such as creating, deleting, or modifying user accounts.</li>
                <li><strong>System configuration:</strong> Configures system settings and parameters.</li>
 427 |                 <li><strong>Performance monitoring:</strong> Monitors system performance and identifies potential issues.</li>
 428 |             </ul>
 429 |         </li>
 430 |     </ol>
 431 | 
 432 |     <h2 id="portfolios">Portfolios</h2>
 433 |     <p>Portfolios in PS2Dox represent collections of financial instruments or assets.</p>
 434 | 
 435 |     <h3>Create Portfolio</h3>
 436 |     <p>Creates a new portfolio with the specified details.</p>
 437 |     <p><strong>Command:</strong></p>
 438 |     <pre><code>{
 439 |   "command": "portfolios.add",
 440 |   "name": "Growth Portfolio",
 441 |   "description": "High-risk, high-reward strategy",
 442 |   "currency": "USD",
 443 |   "baseInstrument": "SPY"
 444 | }</code></pre>
 445 |     <p><strong>Parameters:</strong></p>
 446 |     <table>
 447 |         <thead>
 448 |             <tr>
 449 |                 <th>Parameter</th>
 450 |                 <th>Description</th>
 451 |                 <th>Required</th>
 452 |             </tr>
 453 |         </thead>
 454 |         <tbody>
 455 |             <tr>
 456 |                 <td>name</td>
 457 |                 <td>Name of the portfolio</td>
 458 |                 <td>Yes</td>
 459 |             </tr>
 460 |             <tr>
 461 |                 <td>description</td>
 462 |                 <td>Description of the portfolio strategy</td>
 463 |                 <td>No</td>
 464 |             </tr>
 465 |                 <td>currency</td>
 466 |                 <td>Base currency for the portfolio</td>
 467 |                 <td>Yes</td>
 468 |             </tr>
 469 |             <tr>
 470 |                 <td>baseInstrument</td>
 471 |                 <td>Benchmark instrument for performance comparison</td>
 472 |                 <td>Yes</td>
 473 |             </tr>
 474 |         </tbody>
 475 |     </table>
 476 |     <p><strong>Output:</strong> Returns the newly created portfolio object.</p>
 477 | 
 478 |     <h3>List Portfolios</h3>
 479 |     <p>Retrieves a list of portfolios.</p>
 480 |     <p><strong>Command:</strong></p>
 481 |     <pre><code>{
 482 |   "command": "portfolios.list",
 483 |   "filter": {"currency": "USD"}
 484 | }</code></pre>
 485 |     <p><strong>Parameters:</strong></p>
 486 |     <table>
 487 |         <thead>
 488 |             <tr>
 489 |                 <th>Parameter</th>
 490 |                 <th>Description</th>
 491 |             </tr>
 492 |         </thead>
 493 |         <tbody>
 494 |             <tr>
 495 |                 <td>filter</td>
 496 |                 <td>Object with portfolio fields to filter results</td>
 497 |                 <td>No</td>
 498 |             </tr>
 499 |         </tbody>
 500 |     </table>
 501 |     <p><strong>Output:</strong> Returns an array of portfolio objects matching the filter criteria.</p>
 502 | 
 503 |     <h3>Update Portfolio</h3>
 504 |     <p>Modifies an existing portfolio.</p>
 505 |     <p><strong>Command:</strong></p>
 506 |     <pre><code>{
 507 |   "command": "portfolios.update",
 508 |   "_id": "portfolio_id",
 509 |   "description": "Updated portfolio description"
 510 | }</code></pre>
 511 |     <p><strong>Parameters:</strong></p>
 512 |     <table>
 513 |         <thead>
 514 |             <tr>
 515 |                 <th>Parameter</th>
 516 |                 <th>Description</th>
 517 |                 <th>Required</th>
 518 |             </tr>
 519 |         </thead>
 520 |         <tbody>
 521 |             <tr>
 522 |                 <td>_id</td>
 523 |                 <td>ID of the portfolio to update</td>
 524 |                 <td>Yes</td>
 525 |             </tr>
 526 |             <tr>
 527 |                 <td>name, description, ...</td>
 528 |                 <td>Fields to update</td>
 529 |                 <td>At least one</td>
 530 |             </tr>
 531 |         </tbody>
 532 |     </table>
 533 |     <p><strong>Output:</strong> Returns the updated portfolio object.</p>
 534 | 
 535 |     <h3>Remove Portfolio</h3>
 536 |     <p>Deletes a portfolio from the system.</p>
 537 |     <p><strong>Command:</strong></p>
 538 |     <pre><code>{
 539 |   "command": "portfolios.remove",
 540 |   "_id": "portfolio_id"
 541 | }</code></pre>
 542 |     <p><strong>Parameters:</strong></p>
 543 |     <table>
 544 |         <thead>
 545 |             <tr>
 546 |                 <th>Parameter</th>
 547 |                 <th>Description</th>
 548 |                 <th>Required</th>
 549 |             </tr>
 550 |         </thead>
 551 |         <tbody>
 552 |             <tr>
 553 |                 <td>_id</td>
 554 |                 <td>ID of the portfolio to remove</td>
 555 |                 <td>Yes</td>
 556 |             </tr>
 557 |         </tbody>
 558 |     </table>
 559 |     <p><strong>Output:</strong> Returns a success message or the removed portfolio object.</p>
 560 | 
 561 |     <h3>Get Portfolio Performance</h3>
 562 |     <p>Calculates and returns the performance metrics for a specified portfolio over a given date range.</p>
 563 |     <p><strong>Command:</strong></p>
 564 |     <pre><code>{
 565 |   "command": "portfolios.getPerformance",
 566 |   "_id": "portfolio_id",
 567 |   "startDate": "2023-01-01",
 568 |   "endDate": "2023-12-31"
 569 | }</code></pre>
 570 |     <p><strong>Parameters:</strong></p>
 571 |     <table>
 572 |         <thead>
 573 |             <tr>
 574 |                 <th>Parameter</th>
 575 |                 <th>Description</th>
 576 |                 <th>Required</th>
 577 |             </tr>
 578 |         </thead>
 579 |         <tbody>
 580 |             <tr>
 581 |                 <td>_id</td>
 582 |                 <td>ID of the portfolio</td>
 583 |                 <td>Yes</td>
 584 |             </tr>
 585 |             <tr>
 586 |                 <td>startDate</td>
 587 |                 <td>Start date for performance calculation (YYYY-MM-DD)</td>
 588 |                 <td>Yes</td>
 589 |             </tr>
 590 |                 <td>endDate</td>
 591 |                 <td>End date for performance calculation (YYYY-MM-DD)</td>
 592 |                 <td>Yes</td>
 593 |             </tr>
 594 |         </tbody>
 595 |     </table>
 596 |     <p><strong>Output:</strong> Returns an object with performance metrics including returns, volatility, and comparison to the baseInstrument.</p>
 597 | 
 598 |     <h2 id="prices">Prices</h2>
 599 |     <p>The Prices module in PS2Dox handles asset pricing data.</p>
 600 | 
 601 |     <h3>Get Current Price</h3>
 602 |     <p>Retrieves the most recent price for a specified symbol.</p>
 603 |     <p><strong>Command:</strong></p>
 604 |     <pre><code>{
 605 |   "command": "prices.getCurrent",
 606 |   "symbol": "AAPL",
 607 |   "exchange": "NASDAQ"
 608 | }</code></pre>
 609 |     <p><strong>Parameters:</strong></p>
 610 |     <table>
 611 |         <thead>
 612 |             <tr>
 613 |                 <th>Parameter</th>
 614 |                 <th>Description</th>
 615 |                 <th>Required</th>
 616 |             </tr>
 617 |         </thead>
 618 |         <tbody>
 619 |             <tr>
 620 |                 <td>symbol</td>
 621 |                 <td>Ticker symbol of the asset</td>
 622 |                 <td>Yes</td>
 623 |             </tr>
 624 |             <tr>
 625 |                 <td>exchange</td>
 626 |                 <td>Exchange where the asset is traded</td>
 627 |                 <td>Yes</td>
 628 |             </tr>
 629 |         </tbody>
 630 |     </table>
 631 |     <p><strong>Output:</strong> Returns an object with the current price and timestamp.</p>
 632 | 
 633 |     <h3>Get Historical Prices</h3>
 634 |     <p>Fetches historical price data for a symbol over a specified date range.</p>
 635 |     <p><strong>Command:</strong></p>
 636 |     <pre><code>{
 637 |   "command": "prices.getHistorical",
 638 |   "symbol": "GOOGL",
 639 |   "startDate": "2023-01-01",
 640 |   "endDate": "2023-12-31",
 641 |   "interval": "daily"
 642 | }</code></pre>
 643 |     <p><strong>Parameters:</strong></p>
 644 |     <table>
 645 |         <thead>
 646 |             <tr>
 647 |                 <th>Parameter</th>
 648 |                 <th>Description</th>
 649 |                 <th>Required</th>
 650 |             </tr>
 651 |         </thead>
 652 |         <tbody>
 653 |             <tr>
 654 |                 <td>symbol</td>
 655 |                 <td>Ticker symbol of the asset</td>
 656 |                 <td>Yes</td>
 657 |             </tr>
 658 |             <tr>
 659 |                 <td>startDate</td>
 660 |                 <td>Start date for historical data (YYYY-MM-DD)</td>
 661 |                 <td>Yes</td>
 662 |             </tr>
 663 |                 <td>endDate</td>
 664 |                 <td>End date for historical data (YYYY-MM-DD)</td>
 665 |                 <td>Yes</td>
 666 |             </tr>
 667 |             <tr>
 668 |                 <td>interval</td>
 669 |                 <td>Data interval (daily, weekly, monthly)</td>
 670 |                 <td>Yes</td>
 671 |             </tr>
 672 |         </tbody>
 673 |     </table>
 674 |     <p><strong>Output:</strong> Returns an array of objects, each containing a date and corresponding price data.</p>
 675 | 
 676 |     <h3>Set Price Alert</h3>
 677 |     <p>Creates a price alert for a specific symbol.</p>
 678 |     <p><strong>Command:</strong></p>
 679 |     <pre><code>{
 680 |   "command": "prices.setAlert",
 681 |   "symbol": "TSLA",
 682 |   "condition": "above",
 683 |   "price": 800.00
 684 | }</code></pre>
 685 |     <p><strong>Parameters:</strong></p>
 686 |     <table>
 687 |         <thead>
 688 |             <tr>
 689 |                 <th>Parameter</th>
 690 |                 <th>Description</th>
 691 |                 <th>Required</th>
 692 |             </tr>
 693 |         </thead>
 694 |         <tbody>
 695 |             <tr>
 696 |                 <td>symbol</td>
 697 |                 <td>Ticker symbol of the asset</td>
 698 |                 <td>Yes</td>
 699 |             </tr>
 700 |             <tr>
 701 |                 <td>condition</td>
 702 |                 <td>Alert condition (above, below)</td>
 703 |                 <td>Yes</td>
 704 |             </tr>
 705 |             <tr>
 706 |                 <td>price</td>
 707 |                 <td>Target price for the alert</td>
 708 |                 <td>Yes</td>
 709 |             </tr>
 710 |         </tbody>
 711 |     </table>
 712 |     <p><strong>Output:</strong> Returns a confirmation object with the alert details.</p>
 713 | 
 714 |     <h3>Manage Price Feed</h3>
 715 |     <p>Allows you to subscribe to or unsubscribe from real-time price feeds for specified symbols.</p>
 716 |     <p><strong>Command:</strong></p>
 717 |     <pre><code>{
 718 |   "command": "prices.manageFeed",
 719 |   "action": "subscribe",
 720 |   "symbols": ["AAPL", "GOOGL", "MSFT"]
 721 | }</code></pre>
 722 |     <p><strong>Parameters:</strong></p>
 723 |     <table>
 724 |         <thead>
 725 |             <tr>
 726 |                 <th>Parameter</th>
 727 |                 <th>Description</th>
 728 |                 <th>Required</th>
 729 |             </tr>
 730 |         </thead>
 731 |         <tbody>
 732 |             <tr>
 733 |                 <td>action</td>
 734 |                 <td>Action to perform (subscribe, unsubscribe)</td>
 735 |                 <td>Yes</td>
 736 |             </tr>
 737 |             <tr>
 738 |                 <td>symbols</td>
 739 |                 <td>Array of ticker symbols</td>
 740 |                 <td>Yes</td>
 741 |             </tr>
 742 |         </tbody>
 743 |     </table>
 744 |     <p><strong>Output:</strong> Returns a confirmation object with the updated subscription status.</p>
 745 | 
 746 |     <h2 id="tests">Tests</h2>
 747 |     <p>The Tests module in PS2Dox ensures system reliability and performance by providing a suite of testing tools. This section provides guidance on how to use these tools to verify the functionality and stability of your PS2 integrations.</p>
 748 | 
 749 |     <h3>Run Unit Tests</h3>
 750 |     <p>Executes unit tests for a specific module. Unit tests are designed to test individual components of the system in isolation, ensuring that each component functions correctly.</p>
 751 |     <p><strong>Command:</strong></p>
 752 |     <pre><code>{
 753 |   "command": "tests.runUnit",
 754 |   "module": "authentication"
 755 | }</code></pre>
 756 |     <p><strong>Parameters:</strong></p>
 757 |     <table>
 758 |         <thead>
 759 |             <tr>
 760 |                 <th>Parameter</th>
 761 |                 <th>Description</th>
 762 |                 <th>Required</th>
 763 |             </tr>
 764 |         </thead>
 765 |         <tbody>
 766 |             <tr>
 767 |                 <td><code>module</code></td>
 768 |                 <td>The name of the module to test. This should correspond to a specific component or module within the PS2 system, such as <code>authentication</code>, <code>portfolios</code>, or <code>trades</code>.</td>
 769 |                 <td>Yes</td>
 770 |             </tr>
 771 |         </tbody>
 772 |     </table>
 773 |     <p><strong>Output:</strong></p>
 774 |     <p>Returns a detailed report of the unit test results. The report will indicate whether each test passed or failed, and will provide detailed information about any failures.</p>
 775 |     <p><strong>Example:</strong></p>
 776 |     <p>To run unit tests for the <code>authentication</code> module, you would use the following command:</p>
 777 |     <pre><code>{
 778 |   "command": "tests.runUnit",
 779 |   "module": "authentication"
 780 | }</code></pre>
 781 |     <p>This command will execute all unit tests associated with the <code>authentication</code> module and return a report indicating the results.</p>
 782 | 
 783 |     <h3>Run Integration Tests</h3>
 784 |     <p>Runs integration tests to ensure different parts of the system work correctly together. Integration tests are designed to test the interactions between multiple components of the system, ensuring that they function correctly as a whole.</p>
 785 |     <p><strong>Command:</strong></p>
 786 |     <pre><code>{
 787 |   "command": "tests.runIntegration",
 788 |   "scenario": "full_trade_cycle"
 789 | }</code></pre>
 790 |     <p><strong>Parameters:</strong></p>
 791 |     <table>
 792 |         <thead>
 793 |             <tr>
 794 |                 <th>Parameter</th>
 795 |                 <th>Description</th>
 796 |                 <th>Required</th>
 797 |             </tr>
 798 |         </thead>
 799 |         <tbody>
 800 |             <tr>
 801 |                 <td><code>scenario</code></td>
 802 |                 <td>The name of the integration test scenario to run. This should correspond to a specific integration test scenario defined within the PS2 system, such as <code>full_trade_cycle</code>, which tests the entire process from creating a portfolio to executing trades and calculating performance.</td>
 803 |                 <td>Yes</td>
 804 |             </tr>
 805 |         </tbody>
 806 |     </table>
 807 |     <p><strong>Output:</strong></p>
 808 |     <p>Returns a comprehensive report of the integration test results. The report will indicate whether each test passed or failed, and will provide detailed information about any failures.</p>
 809 |     <p><strong>Example:</strong></p>
 810 |     <p>To run the <code>full_trade_cycle</code> integration test scenario, you would use the following command:</p>
 811 |     <pre><code>{
 812 |   "command": "tests.runIntegration",
 813 |   "scenario": "full_trade_cycle"
 814 | }</code></pre>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>scenario</code></td>
                <td>The name of the integration test scenario to run. This should correspond to a specific integration test scenario defined within the PS2 system, such as <code>full_trade_cycle</code>, which tests the entire process from creating a portfolio to executing trades and calculating performance.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a comprehensive report of the integration test results. The report will indicate whether each test passed or failed, and will provide detailed information about any failures.</p>
    <p><strong>Example:</strong></p>
    <p>To run the <code>full_trade_cycle</code> integration test scenario, you would use the following command:</p>
    <pre><code>{
  "command": "tests.runIntegration",
  "scenario": "full_trade_cycle"
}</code></pre>
    <p>This command will execute the <code>full_trade_cycle</code> integration test scenario and return a report indicating the results.</p>

    <h3>Run Performance Tests</h3>
    <p>Executes performance tests to evaluate the system's behavior under various load conditions. Performance tests are designed to measure the system's performance under different load conditions, such as high volume trading or concurrent user access.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tests.runPerformance",
  "testCase": "high_volume_trading"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>testCase</code></td>
                <td>The name of the performance test case to run. This should correspond to a specific performance test case defined within the PS2 system, such as <code>high_volume_trading</code>, which simulates a high number of concurrent trades to stress-test the system.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a detailed performance report including metrics like response times and throughput. The report will provide insights into the system's performance under the specified load conditions.</p>
    <p><strong>Example:</strong></p>
    <p>To run the <code>high_volume_trading</code> performance test case, you would use the following command:</p>
    <pre><code>{
  "command": "tests.runPerformance",
  "testCase": "high_volume_trading"
}</code></pre>
    <p>This command will execute the <code>high_volume_trading</code> performance test case and return a report indicating the results.</p>

    <h3>Run Automated Test Suite</h3>
    <p>Runs a predefined suite of tests, which may include a combination of unit, integration, and performance tests. Automated test suites are designed to provide a comprehensive assessment of the system's functionality and stability.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tests.runSuite",
  "suite": "daily_regression"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>suite</code></td>
                <td>The name of the test suite to run. This should correspond to a specific test suite defined within the PS2 system, such as <code>daily_regression</code>, which is typically used to ensure no regressions have been introduced by recent changes.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a comprehensive report of all tests run in the suite, including unit, integration, and performance test results. The report will provide an overview of the system's overall health and stability.</p>
    <p><strong>Example:</strong></p>
    <p>To run the <code>daily_regression</code> test suite, you would use the following command:</p>
    <pre><code>{
  "command": "tests.runSuite",
  "suite": "daily_regression"
}</code></pre>
    <p>This command will execute the <code>daily_regression</code> test suite and return a report indicating the results.</p>

    <h3>Tutorial: Running Tests</h3>
    <p>This tutorial provides a step-by-step guide on how to run tests using the PS2 API.</p>
    <ol>
        <li><strong>Identify the test you want to run.</strong> Determine whether you want to run unit tests, integration tests, performance tests, or an automated test suite.</li>
        <li><strong>Construct the command.</strong> Create a JSON object with the <code>command</code> key set to the appropriate test command (e.g., <code>tests.runUnit</code>, <code>tests.runIntegration</code>, <code>tests.runPerformance</code>, or <code>tests.runSuite</code>).</li>
        <li><strong>Specify the parameters.</strong> Add the required parameters to the JSON object, such as the <code>module</code> for unit tests, the <code>scenario</code> for integration tests, the <code>testCase</code> for performance tests, or the <code>suite</code> for automated test suites.</li>
        <li><strong>Execute the command.</strong> Send the JSON object to the PS2 API.</li>
        <li><strong>Analyze the output.</strong> Review the test report to determine whether the tests passed or failed. If any tests failed, investigate the cause of the failures and take corrective action.</li>
    </ol>

    <h2 id="tools">Tools</h2>
    <p>PS2Dox provides various tools to assist users in their operations.</p>

    <h3>Data Analysis</h3>
    <p>Performs statistical analysis on specified datasets.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tools.analyzeData",
  "dataset": "portfolio_returns",
  "method": "regression"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>dataset</td>
                <td>Name of the dataset to analyze</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>method</td>
                <td>Analysis method to apply</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong> Returns the results of the analysis, which vary based on the chosen method.</p>

    <h3>Report Generation</h3>
    <p>Creates detailed reports based on portfolio data.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tools.generateReport",
  "type": "monthly_performance",
  "portfolioId": "portfolio_id"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>type</td>
                <td>Type of report to generate</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>portfolioId</td>
                <td>ID of the portfolio for the report</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong> Returns a detailed report object or a link to download the report.</p>

    <h3>Risk Assessment</h3>
    <p>Evaluates the risk associated with a portfolio.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tools.assessRisk",
  "portfolioId": "portfolio_id",
  "method": "var"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>portfolioId</td>
                <td>ID of the portfolio to assess</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>method</td>
                <td>Risk assessment method to use</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong> Returns a risk assessment report with various risk metrics.</p>

    <h3>API Integration</h3>
    <p>Sets up integration with external APIs.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "tools.integrateAPI",
  "externalService": "marketDataProvider",
  "apiKey": "your_api_key"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>externalService</td>
                <td>Name of the external service to integrate</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td>apiKey</td>
                <td>API key for the external service</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong> Returns a confirmation object with integration status and details.</p>

    <h2 id="trades">Trades</h2>
    <p>The Trades module manages all aspects of trading operations in PS2Dox. This includes placing new orders, modifying existing orders, canceling orders, retrieving trade history, and calculating trade performance.</p>

    <h3>Place Order</h3>
    <p>Places a new order for a specified symbol within a portfolio. This command allows you to buy or sell a financial instrument on behalf of a portfolio.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "trades.placeOrder",
  "portfolioId": "portfolio_id",
  "symbol": "AAPL",
  "type": "buy",
  "quantity": 100,
  "price": 150.00,
  "orderType": "limit"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>portfolioId</code></td>
                <td>The unique identifier of the portfolio for which the trade is being placed.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>symbol</code></td>
                <td>The ticker symbol of the financial instrument to trade (e.g., AAPL for Apple Inc.).</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>type</code></td>
                <td>The type of order, which can be either <code>buy</code> or <code>sell</code>.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>quantity</code></td>
                <td>The number of shares or contracts to trade.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>price</code></td>
                <td>The limit price for the order. This parameter is only required for limit orders.</td>
                <td>Yes for limit orders</td>
            </tr>
            <tr>
                <td><code>orderType</code></td>
                <td>The type of order, which can be either <code>market</code> or <code>limit</code>. A market order is executed immediately at the best available price, while a limit order is executed only when the price reaches the specified limit price.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns an order confirmation object with order details and status. The object will include information such as the order ID, the timestamp of the order, and the current status of the order (e.g., <code>pending</code>, <code>filled</code>, <code>cancelled</code>).</p>

    <h3>Modify Order</h3>
    <p>Modifies an existing, unfilled order. This command allows you to change the quantity or price of a pending order.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "trades.modifyOrder",
  "orderId": "order_id",
  "newQuantity": 150,
  "newPrice": 155.00
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>orderId</code></td>
                <td>The unique identifier of the order to modify.</td>
                <td>Yes</td>
            </tr>
            <tr>
                <td><code>newQuantity</code></td>
                <td>The new quantity for the order. If this parameter is not specified, the quantity will not be changed.</td>
                <td>No</td>
            </tr>
            <tr>
                <td><code>newPrice</code></td>
                <td>The new price for the order (limit orders only). If this parameter is not specified, the price will not be changed.</td>
                <td>No</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns the updated order object with the modified quantity or price.</p>

    <h3>Cancel Order</h3>
    <p>Cancels an unfilled order. This command allows you to cancel a pending order before it is executed.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "trades.cancelOrder",
  "orderId": "order_id"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>orderId</code></td>
                <td>The unique identifier of the order to cancel.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a confirmation of the cancellation. The confirmation will typically include the order ID and a message indicating that the order has been successfully cancelled.</p>

    <h3>Get Trade History</h3>
    <p>Retrieves the trading history for a specified portfolio over a given date range. This command allows you to retrieve a list of all trades executed for a particular portfolio within a specified time period.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "trades.getHistory",
  "_id": "portfolio_id",
  "from": "2023-01-01",
  "till": "2023-12-31",
  "sample": "day",
  "detail": 1
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Value</th>
                <th>Required</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>_id</code></td>
                <td>Portfolio selection, can be portfolio fields: _id or name</td>
                <td>Yes</td>
                <td>Identifies the portfolio for which to retrieve history</td>
            </tr>
            <tr>
                <td><code>from</code></td>
                <td>Date from which trades will be returned. Format YYYY-MM-DD</td>
                <td>No</td>
                <td>Start date of the history range</td>
            </tr>
            <tr>
                <td><code>till</code></td>
                <td>Date until which trades will be returned. Format YYYY-MM-DD</td>
                <td>No</td>
                <td>End date of the history range. If not provided, all trades from the 'from' date will be included</td>
            </tr>
            <tr>
                <td><code>sample</code></td>
                <td>Output date sampling:<br>not set or 0 - trade dates (default)<br>'day' or 1 - daily step<br>'week' or 2 - weekly step<br>'month' or 3 - monthly step</td>
                <td>No</td>
                <td>Determines the granularity of the output data</td>
            </tr>
            <tr>
                <td><code>detail</code></td>
                <td>0: show summary result only by trade dates<br>1: show summary and trades result</td>
                <td>No</td>
                <td>Determines the level of detail in the output</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output Format:</strong></p>
    <p>The output contains an array with date history results in the property 'days', and when detail=1, a property 'details' with symbol information. Each day contains:</p>
    <ul>
        <li><code>nav</code>: Net Asset Value</li>
        <li><code>cash</code>: Amount not invested in symbols</li>
        <li><code>invested</code>: Part invested via trade on this day</li>
        <li><code>investedWithoutTrades</code>: Part invested earlier, but without trade on this day (at current prices)</li>
    </ul>
    <p><strong>Note:</strong> nav = cash + invested + investedWithoutTrades</p>

    <h3>Calculate Trade Performance</h3>
    <p>Calculates the performance metrics for a specific trade, including profit/loss, return on investment, and impact on the overall portfolio performance.</p>
    <p><strong>Command:</strong></p>
    <pre><code>{
  "command": "trades.calculatePerformance",
  "tradeId": "trade_id"
}</code></pre>
    <p><strong>Parameters:</strong></p>
    <table>
        <thead>
            <tr>
                <th>Parameter</th>
                <th>Description</th>
                <th>Required</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>tradeId</code></td>
                <td>The unique identifier of the trade to analyze.</td>
                <td>Yes</td>
            </tr>
        </tbody>
    </table>
    <p><strong>Output:</strong></p>
    <p>Returns a performance metrics object for the specified trade. The object will include metrics such as profit/loss, return on investment, and impact on the overall portfolio performance.</p>
</body>
</html>